



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://roblox.github.io/roact/advanced/bindings-and-refs/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Bindings and Refs - Roact Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#03a9f4">
      
    
    
      <script src="../../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#bindings" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://roblox.github.io/roact/" title="Roact Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Roact Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Bindings and Refs
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/Roblox/roact/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Roblox/roact
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://roblox.github.io/roact/" title="Roact Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Roact Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/Roblox/roact/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Roblox/roact
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/hello-roact/" title="Hello, Roact!" class="md-nav__link">
      Hello, Roact!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/elements/" title="Elements" class="md-nav__link">
      Elements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/components/" title="Components" class="md-nav__link">
      Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/state-and-lifecycle/" title="State and Lifecycle" class="md-nav__link">
      State and Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Advanced Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Advanced Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fragments/" title="Fragments" class="md-nav__link">
      Fragments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../portals/" title="Portals" class="md-nav__link">
      Portals
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Bindings and Refs
      </label>
    
    <a href="./" title="Bindings and Refs" class="md-nav__link md-nav__link--active">
      Bindings and Refs
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bindings" class="md-nav__link">
    Bindings
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binding-properties" class="md-nav__link">
    Binding Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapped-bindings" class="md-nav__link">
    Mapped Bindings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refs" class="md-nav__link">
    Refs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refs-in-action" class="md-nav__link">
    Refs in Action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refs-as-host-properties" class="md-nav__link">
    Refs as Host Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-refs" class="md-nav__link">
    Function Refs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../context/" title="Context" class="md-nav__link">
      Context
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Performance Optimization
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Performance Optimization
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../performance/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../performance/reduce-reconciliation/" title="Reduce Reconcilation" class="md-nav__link">
      Reduce Reconcilation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api-reference/" title="API Reference" class="md-nav__link">
      API Reference
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bindings" class="md-nav__link">
    Bindings
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#binding-properties" class="md-nav__link">
    Binding Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapped-bindings" class="md-nav__link">
    Mapped Bindings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refs" class="md-nav__link">
    Refs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refs-in-action" class="md-nav__link">
    Refs in Action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refs-as-host-properties" class="md-nav__link">
    Refs as Host Properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-refs" class="md-nav__link">
    Function Refs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Roblox/roact/edit/master/docs/advanced/bindings-and-refs.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Bindings and Refs</h1>
                
                <p>In certain situations, Roact's reconciliation process is ill-suited for managing some Instance properties. For cases like this, Roact provides escape hatches in the form of Bindings and Refs.</p>
<p>Bindings and Refs are intended to be used in cases where Roact cannot solve a problem directly, or its solution might not be performant enough, like:</p>
<ul>
<li>Invoking functions on Roblox Instances</li>
<li>Dynamically resizing a host component to fit its contents</li>
<li>Gamepad selection</li>
<li>Animations</li>
</ul>
<h2 id="bindings">Bindings<a class="headerlink" href="#bindings" title="Permanent link">&para;</a></h2>
<p>Bindings are special objects that Roact automatically unwraps into values. When a binding is updated, Roact will change only the specific properties that are subscribed to it.</p>
<h3 id="binding-properties">Binding Properties<a class="headerlink" href="#binding-properties" title="Permanent link">&para;</a></h3>
<p>Bindings can be used to provide an external source for a prop value, or to update those values outside of the Roact reconciliation process.</p>
<p>First, create a binding and an updater using <code>Roact.createBinding()</code> and put the results somewhere persistent. <code>createBinding</code> returns two results: a binding object and an updater function, which is used to update the binding's value.</p>
<div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">Foo</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">Component</span><span class="p">:</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;Foo&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Foo</span><span class="p">:</span><span class="nf">init</span><span class="p">()</span>
    <span class="c1">-- createBinding takes an initial value; for our purposes, 0 is fine</span>
    <span class="n">self</span><span class="p">.</span><span class="n">clickCount</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">updateClickCount</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createBinding</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>

<p>Then, connect the binding value to something that we're rendering and the updater to something that will invoke it.</p>
<div class="codehilite"><pre><span></span><span class="kr">function</span> <span class="nc">Foo</span><span class="p">:</span><span class="nf">render</span><span class="p">()</span>
    <span class="kr">return</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;TextButton&quot;</span><span class="p">,</span> <span class="p">{</span>
        <span class="c1">-- Roact unwraps the binding, sets the Text property to the binding&#39;s value,</span>
        <span class="c1">-- and subscribes to the binding</span>
        <span class="n">Text</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">clickCount</span><span class="p">,</span>
        <span class="p">[</span><span class="n">Roact</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">Activated</span><span class="p">]</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span>
            <span class="c1">-- When the user clicks the button, the count will be incremented and</span>
            <span class="c1">-- Roact will update any properties that are subscribed to the binding</span>
            <span class="n">self</span><span class="p">.</span><span class="n">updateClickCount</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">clickCount</span><span class="p">:</span><span class="n">getValue</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="kr">end</span>
    <span class="p">})</span>
<span class="kr">end</span>
</pre></div>

<p>The result of this example is a <code>TextButton</code> that displays the number of times it's been clicked. In this case, we connect the updater to the button's <code>Activated</code> event. Other use cases could be connecting it to some external property in <code>didMount</code> or passing it to a child component as a callback.</p>
<h3 id="mapped-bindings">Mapped Bindings<a class="headerlink" href="#mapped-bindings" title="Permanent link">&para;</a></h3>
<p>Often, a binding's value isn't useful by itself. It needs to be transformed into some other value in order to be useful when assigned to an Instance property.</p>
<p>Let's modify the above component to make use of a mapped binding:</p>
<div class="codehilite"><pre><span></span><span class="kr">function</span> <span class="nc">Foo</span><span class="p">:</span><span class="nf">render</span><span class="p">()</span>
    <span class="kr">return</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;TextButton&quot;</span><span class="p">,</span> <span class="p">{</span>
<span class="hll">        <span class="c1">-- Roact will receive the mapped value from the binding</span>
</span><span class="hll">        <span class="n">Text</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">clickCount</span><span class="p">:</span><span class="n">map</span><span class="p">(</span><span class="kr">function</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span class="hll">            <span class="kr">return</span> <span class="s2">&quot;Clicks: &quot;</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span class="hll">        <span class="kr">end</span><span class="p">),</span>
</span>        <span class="p">[</span><span class="n">Roact</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">Activated</span><span class="p">]</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span>
            <span class="c1">-- When the user clicks the button, the count will be incremented</span>
            <span class="n">self</span><span class="p">.</span><span class="n">updateClickCount</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">clickCount</span><span class="p">:</span><span class="n">getValue</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="kr">end</span>
    <span class="p">})</span>
<span class="kr">end</span>
</pre></div>

<p>Our mapped binding transforms the number of clicks into a string. Now the <code>TextButton</code> will display "Clicks: 0" instead of just the number!</p>
<h2 id="refs">Refs<a class="headerlink" href="#refs" title="Permanent link">&para;</a></h2>
<p>While bindings are most helpful for individual props, we often want to access an entire Roblox Instance and its methods.</p>
<p><em>Refs</em> are a special type of binding that point to Roblox Instance objects that are created by Roact.</p>
<p>Refs can only be attached to host components. This is different from React, where refs can be used to call members of composite components.</p>
<h3 id="refs-in-action">Refs in Action<a class="headerlink" href="#refs-in-action" title="Permanent link">&para;</a></h3>
<p>To use a ref, call <code>Roact.createRef()</code> and put the result somewhere persistent. Generally, that means that refs are only used inside stateful components.</p>
<div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">Foo</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">Component</span><span class="p">:</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;Foo&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Foo</span><span class="p">:</span><span class="nf">init</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">textBoxRef</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createRef</span><span class="p">()</span>
<span class="kr">end</span>
</pre></div>

<p>Next, use the ref inside of <code>render</code> by creating a host component. Refs use the special key <code>Roact.Ref</code>.</p>
<div class="codehilite"><pre><span></span><span class="kr">function</span> <span class="nc">Foo</span><span class="p">:</span><span class="nf">render</span><span class="p">()</span>
    <span class="kr">return</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;TextBox&quot;</span><span class="p">,</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">Roact</span><span class="p">.</span><span class="n">Ref</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textBoxRef</span><span class="p">,</span>
    <span class="p">})</span>
<span class="kr">end</span>
</pre></div>

<p>Finally, we can use the value of the ref at any point after our component is mounted.</p>
<div class="codehilite"><pre><span></span><span class="kr">function</span> <span class="nc">Foo</span><span class="p">:</span><span class="nf">didMount</span><span class="p">()</span>
    <span class="c1">-- The actual Instance can be retrieved using the `getValue` method</span>
    <span class="kd">local</span> <span class="n">textBox</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textBoxRef</span><span class="p">:</span><span class="n">getValue</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TextBox has this text:&quot;</span><span class="p">,</span> <span class="n">textBox</span><span class="p">.</span><span class="n">Text</span><span class="p">)</span>
<span class="kr">end</span>
</pre></div>

<h3 id="refs-as-host-properties">Refs as Host Properties<a class="headerlink" href="#refs-as-host-properties" title="Permanent link">&para;</a></h3>
<p>In addition to providing access to underlying Roblox objects, refs also provide a handy shortcut for Roblox Instance properties that expect another Instance as their value. One commonly-encountered example is <code>NextSelectionLeft</code> and its counterparts.</p>
<p>Roact's Roblox renderer knows that bindings are not valid Roblox Instance values, so it will unwrap them for you:</p>
<div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="n">Bar</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">Component</span><span class="p">:</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;Bar&quot;</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Bar</span><span class="p">:</span><span class="nf">init</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">leftButtonRef</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createRef</span><span class="p">()</span>
    <span class="n">self</span><span class="p">.</span><span class="n">rightButtonRef</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createRef</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Bar</span><span class="p">:</span><span class="nf">render</span><span class="p">()</span>
    <span class="kr">return</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;Frame&quot;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="p">{</span>
        <span class="n">LeftButton</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;TextButton&quot;</span><span class="p">,</span> <span class="p">{</span>
            <span class="p">[</span><span class="n">Roact</span><span class="p">.</span><span class="n">Ref</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">leftButtonRef</span><span class="p">,</span>
            <span class="n">NextSelectionRight</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">rightButtonRef</span><span class="p">,</span>
        <span class="p">}),</span>
        <span class="n">RightButton</span> <span class="o">=</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;TextButton&quot;</span><span class="p">,</span> <span class="p">{</span>
            <span class="p">[</span><span class="n">Roact</span><span class="p">.</span><span class="n">Ref</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">rightButtonRef</span><span class="p">,</span>
            <span class="n">NextSelectionLeft</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">leftButtonRef</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="p">})</span>
<span class="kr">end</span>
</pre></div>

<p>Since refs use bindings under the hood, they will be automatically updated whenever the ref changes. This means there's no need to worry about the order in which refs are assigned relative to when properties that use them get set.</p>
<h3 id="function-refs">Function Refs<a class="headerlink" href="#function-refs" title="Permanent link">&para;</a></h3>
<p>The original ref API was based on functions instead of objects (and does not use bindings). Its use is not recommended for most cases anymore.</p>
<p>This style of ref involves passing a function as the <code>Roact.Ref</code> prop as opposed to a dedicated ref object:</p>
<div class="codehilite"><pre><span></span><span class="kd">local</span> <span class="kr">function</span> <span class="nf">Baz</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>
    <span class="kr">return</span> <span class="n">Roact</span><span class="p">.</span><span class="n">createElement</span><span class="p">(</span><span class="s2">&quot;TextBox&quot;</span><span class="p">,</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">Roact</span><span class="p">.</span><span class="n">Ref</span><span class="p">]</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
            <span class="c1">-- Be careful to guard against nil refs; this is a gotcha of</span>
            <span class="c1">-- function refs.</span>
            <span class="kr">if</span> <span class="n">instance</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TextBox has this text:&quot;</span><span class="p">,</span> <span class="n">instance</span><span class="p">.</span><span class="n">Text</span><span class="p">)</span>
            <span class="kr">else</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;TextBox ref removed.&quot;</span><span class="p">)</span>
            <span class="kr">end</span>
        <span class="kr">end</span><span class="p">,</span>
    <span class="p">})</span>
<span class="kr">end</span>
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Function refs, unlike bindings, <em>cannot</em> be used as properties for host components. This will result in an error. </p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When a function ref is called, it's not guaranteed that its sibling or parent components have finished mounting. Causing side effects here can cause difficult-to-trace bugs.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When a component with a function ref unmounts, or when the ref value changes, the component's ref is passed <code>nil</code>.</p>
</div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../portals/" title="Portals" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Portals
              </span>
            </div>
          </a>
        
        
          <a href="../context/" title="Context" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Context
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>